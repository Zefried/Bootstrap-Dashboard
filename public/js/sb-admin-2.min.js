/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2021 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

// Import jQuery properly
import $ from 'jquery';

(function ($) {
  "use strict";

  // Sidebar toggle behavior
  $("#sidebarToggle, #sidebarToggleTop").on("click", function () {
    $("body").toggleClass("sidebar-toggled");
    $(".sidebar").toggleClass("toggled");
    if ($(".sidebar").hasClass("toggled")) {
      $(".sidebar .collapse").collapse("hide");
    }
  });

  // Window resize handling
  $(window).resize(function () {
    if ($(window).width() < 768) {
      $(".sidebar .collapse").collapse("hide");
    }
    if ($(window).width() < 480 && !$(".sidebar").hasClass("toggled")) {
      $("body").addClass("sidebar-toggled");
      $(".sidebar").addClass("toggled");
      $(".sidebar .collapse").collapse("hide");
    }
  });

  // Prevent sidebar scrolling when fixed
  $("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel", function (e) {
    if ($(window).width() > 768) {
      const o = e.originalEvent.wheelDelta || -e.originalEvent.detail;
      this.scrollTop += 30 * (o < 0 ? 1 : -1);
      e.preventDefault();
    }
  });

  // Scroll to top button visibility
  $(document).on("scroll", function () {
    $(this).scrollTop() > 100
      ? $(".scroll-to-top").fadeIn()
      : $(".scroll-to-top").fadeOut();
  });

  // Smooth scrolling for scroll-to-top
  $(document).on("click", "a.scroll-to-top", function (e) {
    const o = $(this);
    $("html, body").stop().animate(
      { scrollTop: $(o.attr("href")).offset().top },
      1000,
      "easeInOutExpo"
    );
    e.preventDefault();
  });
})(jQuery);
